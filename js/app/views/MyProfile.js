define(["NavView",getViewTemplatePath("MyProfile"),"UItreeMenu","UserCenterInfoModel","UISlide","UILoading","MyProfileStore","LoginOutModel","LanguageStore","SessionInfoModel"],function(a,b,c,d,e,f,g,h,i,j){var k=(j.getInstance(),d.getInstance()),l=i.getInstance(),m=h.getInstance();return _.inherit(a,{propertys:function($super){$super()},onCreate:function(){this.$el.html(b),$("#myinfo-selfService")[0].innerHTML=l.getAttr("language").selfService,this.els={basicInfo_tpl:this.$el.find("#basic_info_tpl")},this.loading1||(this.loading1=new f({maskToHide:!0}));var a=this;this.loading1.show();var e=[{app_resource_code:"01",describe_en_us:"My Personnel Info",describe_zh_cn:"我的信息"},{app_resource_code:"02",describe_en_us:"My Payslip",describe_zh_cn:"我的工资单"}],g=[];_.each(e,function(a,b,c){g.push(d.viewMenuInfoModel(a.app_resource_code,a.describe_zh_cn,[]))}),this.tree_menu=new c({datamodel:{data:g},wrapper:this.$(".ct-main-content"),scrollWrapper:this.$(".ct-main_menu"),scrollScroller:this.$(".ct-main-content"),itemClick:function(b){var c=$(b.currentTarget);""!=c.attr("target")&&($("body").toggleClass("overflow-h"),$("#main").toggleClass("overflow-h"),a.forward(c.attr("target")))},itemleafClick:function(b){var c=$(b.currentTarget);if("18"==c.attr("data-leaf-id"))window.location.href=c.attr("target");else if("19"==c.attr("data-leaf-id")){var d=h.getInstance();d.execute(function(b){return"0"==b.status?(this.toast1.showToast(b.message),!1):($("header").toggleClass("ct-h-position"),$(".ct-main_menu").toggleClass("ct-main-m"),$("body").toggleClass("overflow-h"),a.forward(c.attr("target")),void 0)},function(a){0},this,function(a){},{})}else""!=c.attr("target")&&($("body").toggleClass("overflow-h"),$("#main").toggleClass("overflow-h"),a.forward(c.attr("target")))}}),this.tree_menu.show(),this.$(".ct-main_menu").hide(),a.$(".ct-main_menu").hasClass("ct-main-m")&&($("body").removeClass("overflow-h"),$("#main").removeClass("overflow-h")),a.loading1.hide()},events:{"touchstart .myDivCard.item,.flex-btn":function(a){$(a.currentTarget).addClass("cur")},"touchend .myDivCard.item,.flex-btn":function(a){$(a.currentTarget).removeClass("cur")},"touchcancel .myDivCard.item,.flex-btn":function(a){$(a.currentTarget).removeClass("cur")},"click #salaryInfo":"view_salary","click #newsInfo":"view_news","click #policyInfo":"view_policy","click #insurance":"view_insurance","click .icon_menu":"toggleLeftMenu","click #work_todo":"work_todo","click #toDoList":"toDoList","click #work_hint":"work_hint","click #work_notify":"work_notify","click #wait_apply":"wait_apply","click #on_apply":"on_apply","click #self_service":"self_service","click #has_apply":"has_apply","click #myInfo":"myinfo","click #myInfomatin":"myinfo","click #leaveInfo":"leaveInfo","click #fq":"fq","click .list-item-nav":"jump_settingsPage","click .settings-mask-black":"toggleSettingsMenu"},view_salary:function(){this.forward("ViewSalary")},view_news:function(){this.forward("News_List")},view_policy:function(){this.forward("PolicyList")},view_insurance:function(){this.forward("commercialInsurance")},toggleLeftMenu:function(){this.$(".ct-main_a").toggleClass("ct-main"),this.$("header").toggleClass("ct-h-position"),this.$(".ct-main_menu").show(),this.$(".ct-main_menu").toggleClass("ct-main-m"),$("body").toggleClass("overflow-h"),$("#main").toggleClass("overflow-h")},toggleSettingsMenu:function(){this.$(".settings-nav").toggleClass("settings-nav-hide"),this.$(".settings-nav").toggleClass("settings-nav-show"),this.$(".mask-nav").toggleClass("settings-mask-black")},self_service:function(){this.forward("MyProfile")},myinfo:function(){this.forward("MyInfo")},fq:function(){this.forward("FAQ")},jump_settingsPage:function(a){var b=$(a.currentTarget);"language"==b.attr("data-id")?this.forward("Settings-language"):"password"==b.attr("data-id")?this.forward("changePwd"):"logout"==b.attr("data-id")&&m.execute(function(a){return"0"==a.status?(this.toast1.showToast(a.message),!1):(this.$(".settings-nav").toggleClass("settings-nav-hide"),this.$(".settings-nav").toggleClass("settings-nav-show"),this.$(".mask-nav").toggleClass("settings-mask-black"),window.location.href=window.location.href.substring(0,window.location.href.indexOf("#")),void 0)},function(a){0},this,function(a){},{})},work_todo:function(){this.forward("MyWork_List!work_todo")},toDoList:function(){this.forward("MyWork_todoList")},leaveInfo:function(){this.forward("MyWork_leaveList")},work_hint:function(){this.forward("MyWork_List!work_hint")},work_notify:function(){this.forward("MyWork_List!work_notify")},wait_apply:function(){this.forward("MyWork_List!wait_apply")},on_apply:function(){this.forward("MyWork_List!on_apply")},has_apply:function(){this.forward("MyWork_List!has_apply")},onPreShow:function(){this.turning()},onShow:function(){k.execute(function(a){$("#basic_info_wrap").html(_.template(this.els.basicInfo_tpl.html())({basic_infoData:a.data.menu_info})),this.$(".ct-main_menu").hasClass("ct-main-m")||($("body").addClass("overflow-h"),$("#main").addClass("overflow-h")),this.slider&&this.slider._resize(),this.refreshHeight()},function(a){0},this,function(a){},{}),this.$(".ct-main_menu").hasClass("ct-main-m")||($("body").addClass("overflow-h"),$("#main").addClass("overflow-h")),this.slider&&this.slider._resize(),this.refreshHeight()},refreshHeight:function(){this.tree_menu&&this.tree_menu.scroll&&this.tree_menu.scroll.refresh&&this.tree_menu.scroll.refresh()},setAndShowTopAds:function(a){this.$el.find(".J_imageSlider").html("");var b=this;this.slider=new e({images:a,container:b.$el.find(".J_imageSlider"),dir:"LEFT",index:0,noNeedDefault:"false",autoPlay:0,loop:!0,showNav:1,onImageClick:$.proxy(function(){var b=this.slider.index;if(a[b]){var c=a[b].link;window.location=c}},this)}),this.slider.play()},onHide:function(){}})});